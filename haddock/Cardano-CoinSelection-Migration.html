<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cardano.CoinSelection.Migration</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Cardano.CoinSelection.Migration.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-coin-selection-1.0.0: Algorithms for coin selection and fee balancing.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2018-2020 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.CoinSelection.Migration</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Coin Selection for Migration</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains an algorithm to select coins for migration from legacy
 wallets to newer wallets.</p><p>We want users to be able to migrate their funds from a legacy random wallet
 to a new sequential wallet. To do this, we have to move funds from a wallet
 to another by making transactions. Funds are ultimately a sum of many coins
 (a.k.a UTxOs). In a transaction, we can select a few coins, and send them to
 addresses, effectively creating new coins / UTxOs doing this.</p><p>There are some limitations regarding the number of coins that can be selected
 at once in a single transaction (theoretically 255 coins, in practice ~170)
 because there's a transaction max size (in bytes) enforced by the network.
 Also, there's a direct relationship between the maximum number of inputs we
 can select, and the maximum number of outputs we can produce (increasing one
 will decrease the other, and vice-versa).</p><p>When making a transaction, coins used as inputs for a transaction becomes
 unavailable for a while, until the transaction is inserted into the ledger
 and, make some new coins available as change (very much like when paying
 with bank notes to a shop, if we give a 20 EUR note to pay for 3 EUR, we
 can't spend the remaining 17 EUR before we have received the change!).
 So, a wallet with a small number of UTxO will not be able to make many
 transactions in parallel and will have to make them sequentially, waiting
 for the previous ones to be inserted before making new ones (we also say
 that a wallet is not &quot;fragmented enough&quot;).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:selectCoins">selectCoins</a> :: <span class="keyword">forall</span> i o. (<a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> i, <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> o) =&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o -&gt; <a href="../base-4.12.0.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a> -&gt; <a href="Cardano-CoinSelection.html#t:CoinMap" title="Cardano.CoinSelection">CoinMap</a> i -&gt; [<a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o]</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Coin Selection for Migration</h1></a><div class="top"><p class="src"><a id="v:selectCoins" class="def">selectCoins</a> <a href="src/Cardano.CoinSelection.Migration.html#selectCoins" class="link">Source</a> <a href="#v:selectCoins" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> i, <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> o)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o</td><td class="doc"><p>Fee computation and threshold definition</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.12.0.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></td><td class="doc"><p>Maximum number of inputs we can select per transaction</p></td></tr><tr><td class="src">-&gt; <a href="Cardano-CoinSelection.html#t:CoinMap" title="Cardano.CoinSelection">CoinMap</a> i</td><td class="doc"><p>UTxO to deplete</p></td></tr><tr><td class="src">-&gt; [<a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Construct a list of coin selections / transactions to transfer the totality
 of a user's wallet. The resulting <code><a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a></code> do not contain any
 <code><a href="Cardano-CoinSelection.html#v:outputs" title="Cardano.CoinSelection">outputs</a></code>, but only change coins (so there's no restriction about how
 addresses are generated).</p><p>It tries to fit as many inputs as possible in a single transaction (fixed by
 the <code><a href="../base-4.12.0.0/Data-Word.html#t:Word8" title="Data.Word">Word8</a></code> maximum number of inputs given as argument.</p><p>The fee options are used to balance the coin selections and fix a threshold
 for dust that is removed from the selections.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>