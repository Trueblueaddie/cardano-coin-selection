<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cardano.CoinSelection.Fee</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Cardano.CoinSelection.Fee.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-coin-selection-0.0.1: Algorithms for coin selection and fee balancing.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>&#169; 2018-2020 IOHK</td></tr><tr><th>License</th><td>Apache-2.0</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.CoinSelection.Fee</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Fee Calculation</a></li><li><a href="#g:3">Fee Adjustment</a></li><li><a href="#g:4">Dust Processing</a></li><li><a href="#g:5">Coin Splitting</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Provides the API of Coin Selection algorithm and Fee Calculation
 This module contains the implementation of adjusting coin selection for a
 fee.  The sender pays for the fee and additional inputs are picked randomly.
 For more information refer to:
 <a href="https://iohk.io/blog/self-organisation-in-coin-selection/">https://iohk.io/blog/self-organisation-in-coin-selection/</a></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Fee">Fee</a> = <a href="#v:Fee">Fee</a> {<ul class="subs"><li><a href="#v:unFee">unFee</a> :: <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li></ul>}</li><li class="src short"><a href="#v:calculateFee">calculateFee</a> :: <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></li><li class="src short"><a href="#v:distributeFee">distributeFee</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a>, <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:FeeEstimator">FeeEstimator</a> i o = <a href="#v:FeeEstimator">FeeEstimator</a> {<ul class="subs"><li><a href="#v:estimateFee">estimateFee</a> :: <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:FeeOptions">FeeOptions</a> i o = <a href="#v:FeeOptions">FeeOptions</a> {<ul class="subs"><li><a href="#v:feeEstimator">feeEstimator</a> :: <a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o</li><li><a href="#v:dustThreshold">dustThreshold</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ErrAdjustForFee">ErrAdjustForFee</a> = <a href="#v:ErrCannotCoverFee">ErrCannotCoverFee</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li><li class="src short"><a href="#v:adjustForFee">adjustForFee</a> :: (Buildable i, Buildable o, <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> i, MonadRandom m) =&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o -&gt; <a href="Cardano-CoinSelection.html#t:CoinMap" title="Cardano.CoinSelection">CoinMap</a> i -&gt; <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Except.html#t:ExceptT" title="Control.Monad.Trans.Except">ExceptT</a> <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> m (<a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o)</li><li class="src short"><a href="#v:reduceChangeOutputs">reduceChangeOutputs</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:DustThreshold">DustThreshold</a> = <a href="#v:DustThreshold">DustThreshold</a> {<ul class="subs"><li><a href="#v:unDustThreshold">unDustThreshold</a> :: <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></li></ul>}</li><li class="src short"><a href="#v:coalesceDust">coalesceDust</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>]</li><li class="src short"><a href="#v:splitCoin">splitCoin</a> :: <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>]</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Types</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Fee" class="def">Fee</a> <a href="src/Cardano.CoinSelection.Fee.html#Fee" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></p><div class="doc"><p>Represents a fee to be paid on a transaction.</p><p>This type is isomorphic to <code><a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Fee" class="def">Fee</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unFee" class="def">unFee</a> :: <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Fee" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fee:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-106" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Fee:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fee:Ord:2"></span> <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-106" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Fee:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fee:Show:3"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-107" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Fee:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fee:Generic:4"></span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-106" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Fee:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> x -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fee:Rep:5"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-106" class="link">Source</a> <a href="#t:Fee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Fee:Rep:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;Fee&quot; &quot;Cardano.CoinSelection.Fee&quot; &quot;cardano-coin-selection-0.0.1-3OhqtrjTUsjLqk57BzacmE&quot; <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;Fee&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;unFee&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>)))</div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Fee Calculation</h1></a><div class="top"><p class="src"><a id="v:calculateFee" class="def">calculateFee</a> :: <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> <a href="src/Cardano.CoinSelection.Fee.html#calculateFee" class="link">Source</a> <a href="#v:calculateFee" class="selflink">#</a></p><div class="doc"><p>Calculates the current fee associated with a given <code><a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:distributeFee" class="def">distributeFee</a> :: <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a>, <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>) <a href="src/Cardano.CoinSelection.Fee.html#distributeFee" class="link">Source</a> <a href="#v:distributeFee" class="selflink">#</a></p><div class="doc"><p>Distribute the given fee over the given list of coins, so that each coin
   is allocated a <strong>fraction</strong> of the fee in proportion to its relative size.</p><h2>Pre-condition</h2><p>Every coin in the given list must be <strong>non-zero</strong> in value.</p><h2>Examples</h2><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>distributeFee (Fee 2) [(Coin 1), (Coin 1)]
</code></strong>[(Fee 1, Coin 1), (Fee 1, Coin 1)]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>distributeFee (Fee 4) [(Coin 1), (Coin 1)]
</code></strong>[(Fee 2, Coin 1), (Fee 2, Coin 1)]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>distributeFee (Fee 7) [(Coin 1), (Coin 2), (Coin 4)]
</code></strong>[(Fee 1, Coin 1), (Fee 2, Coin 2), (Fee 4, Coin 4)]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>distributeFee (Fee 14) [(Coin 1), (Coin 2), (Coin 4)]
</code></strong>[(Fee 2, Coin 1), (Fee 4, Coin 2), (Fee 8, Coin 4)]
</pre></div></div><a href="#g:3" id="g:3"><h1>Fee Adjustment</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:FeeEstimator" class="def">FeeEstimator</a> i o <a href="src/Cardano.CoinSelection.Fee.html#FeeEstimator" class="link">Source</a> <a href="#t:FeeEstimator" class="selflink">#</a></p><div class="doc"><p>Provides a function capable of estimating the fee for a given coin
   selection.</p><p>The fee estimate can depend on the numbers of inputs, outputs, and change
 outputs within the coin selection, as well as their magnitudes.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FeeEstimator" class="def">FeeEstimator</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:estimateFee" class="def">estimateFee</a> :: <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:FeeEstimator" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FeeEstimator:Generic:1"></span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o)</span> <a href="src/Cardano.CoinSelection.Fee.html#line-144" class="link">Source</a> <a href="#t:FeeEstimator" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FeeEstimator:Generic:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o) x -&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FeeEstimator:Rep:2"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o)</span> <a href="src/Cardano.CoinSelection.Fee.html#line-144" class="link">Source</a> <a href="#t:FeeEstimator" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FeeEstimator:Rep:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o) = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;FeeEstimator&quot; &quot;Cardano.CoinSelection.Fee&quot; &quot;cardano-coin-selection-0.0.1-3OhqtrjTUsjLqk57BzacmE&quot; <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FeeEstimator&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;estimateFee&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a>))))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FeeOptions" class="def">FeeOptions</a> i o <a href="src/Cardano.CoinSelection.Fee.html#FeeOptions" class="link">Source</a> <a href="#t:FeeOptions" class="selflink">#</a></p><div class="doc"><p>Provides options for fee balancing.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FeeOptions" class="def">FeeOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:feeEstimator" class="def">feeEstimator</a> :: <a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:dustThreshold" class="def">dustThreshold</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:FeeOptions" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FeeOptions:Generic:1"></span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o)</span> <a href="src/Cardano.CoinSelection.Fee.html#line-153" class="link">Source</a> <a href="#t:FeeOptions" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FeeOptions:Generic:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o) :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o) x -&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FeeOptions:Rep:2"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o)</span> <a href="src/Cardano.CoinSelection.Fee.html#line-153" class="link">Source</a> <a href="#t:FeeOptions" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FeeOptions:Rep:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o) = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;FeeOptions&quot; &quot;Cardano.CoinSelection.Fee&quot; &quot;cardano-coin-selection-0.0.1-3OhqtrjTUsjLqk57BzacmE&quot; <a href="../base-4.12.0.0/Data-Bool.html#v:False" title="Data.Bool">False</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;FeeOptions&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;feeEstimator&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> (<a href="Cardano-CoinSelection-Fee.html#t:FeeEstimator" title="Cardano.CoinSelection.Fee">FeeEstimator</a> i o)) <a href="../base-4.12.0.0/GHC-Generics.html#t::-42-:" title="GHC.Generics">:*:</a> <a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;dustThreshold&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a>)))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ErrAdjustForFee" class="def">ErrAdjustForFee</a> <a href="src/Cardano.CoinSelection.Fee.html#ErrAdjustForFee" class="link">Source</a> <a href="#t:ErrAdjustForFee" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ErrCannotCoverFee" class="def">ErrCannotCoverFee</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></td><td class="doc"><p>UTxO exhausted during fee covering
 We record what amount missed to cover the fee</p></td></tr></table></div><div class="subs instances"><details id="i:ErrAdjustForFee" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrAdjustForFee:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-159" class="link">Source</a> <a href="#t:ErrAdjustForFee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrAdjustForFee:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ErrAdjustForFee:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-159" class="link">Source</a> <a href="#t:ErrAdjustForFee" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ErrAdjustForFee:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:adjustForFee" class="def">adjustForFee</a> :: (Buildable i, Buildable o, <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> i, MonadRandom m) =&gt; <a href="Cardano-CoinSelection-Fee.html#t:FeeOptions" title="Cardano.CoinSelection.Fee">FeeOptions</a> i o -&gt; <a href="Cardano-CoinSelection.html#t:CoinMap" title="Cardano.CoinSelection">CoinMap</a> i -&gt; <a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Except.html#t:ExceptT" title="Control.Monad.Trans.Except">ExceptT</a> <a href="Cardano-CoinSelection-Fee.html#t:ErrAdjustForFee" title="Cardano.CoinSelection.Fee">ErrAdjustForFee</a> m (<a href="Cardano-CoinSelection.html#t:CoinSelection" title="Cardano.CoinSelection">CoinSelection</a> i o) <a href="src/Cardano.CoinSelection.Fee.html#adjustForFee" class="link">Source</a> <a href="#v:adjustForFee" class="selflink">#</a></p><div class="doc"><p>Given the coin selection result from a policy run, adjust the outputs for
 fees, potentially returning additional inputs that we need to cover all
 fees.</p><p>We lose the relationship between the transaction outputs and their
 corresponding inputs/change outputs here. This is a decision we may wish to
 revisit later. For now however note that since</p><p>(a) coin selection tries to establish a particular ratio between
      payment outputs and change outputs (currently it aims for an average of
      1:1)</p><p>(b) coin selection currently only generates a single change output per
      payment output, distributing the fee proportionally across all change
      outputs is roughly equivalent to distributing it proportionally over
      the payment outputs (roughly, not exactly, because the 1:1 proportion
      is best effort only, and may in some cases be wildly different).</p><p>Note that for (a) we don't need the ratio to be 1:1, the above reasoning
 will remain true for any proportion 1:n. For (b) however, if coin selection
 starts creating multiple outputs, and this number may vary, then losing the
 connection between outputs and change outputs will mean that that some
 outputs may pay a larger percentage of the fee (depending on how many change
 outputs the algorithm happened to choose).</p></div></div><div class="top"><p class="src"><a id="v:reduceChangeOutputs" class="def">reduceChangeOutputs</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:Fee" title="Cardano.CoinSelection.Fee">Fee</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] <a href="src/Cardano.CoinSelection.Fee.html#reduceChangeOutputs" class="link">Source</a> <a href="#v:reduceChangeOutputs" class="selflink">#</a></p><div class="doc"><p>Pays for the given fee by subtracting it from the given list of change
   outputs, so that each change output is reduced by a portion of the fee
   that's in proportion to its relative size.</p><h2>Basic Examples</h2><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reduceChangeOutputs (DustThreshold 0) (Fee 4) (Coin &lt;$&gt; [2, 2, 2, 2])
</code></strong>[Coin 1, Coin 1, Coin 1, Coin 1]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reduceChangeOutputs (DustThreshold 0) (Fee 15) (Coin &lt;$&gt; [2, 4, 8, 16])
</code></strong>[Coin 1, Coin 2, Coin 4, Coin 8]
</pre><h2>Handling Dust</h2><p>Any dust outputs in the resulting list are coalesced according to the given
 dust threshold: (See <code><a href="Cardano-CoinSelection-Fee.html#v:coalesceDust" title="Cardano.CoinSelection.Fee">coalesceDust</a></code>.)</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reduceChangeOutputs (DustThreshold 1) (Fee 4) (Coin &lt;$&gt; [2, 2, 2, 2])
</code></strong>[Coin 4]
</pre><h2>Handling Insufficient Change</h2><p>If there's not enough change to pay for the fee, or if there's only just
 enough to pay for it exactly, this function returns the <em>empty list</em>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reduceChangeOutputs (DustThreshold 0) (Fee 15) (Coin &lt;$&gt; [10])
</code></strong>[]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>reduceChangeOutputs (DustThreshold 0) (Fee 15) (Coin &lt;$&gt; [1, 2, 4, 8])
</code></strong>[]
</pre></div></div><a href="#g:4" id="g:4"><h1>Dust Processing</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:DustThreshold" class="def">DustThreshold</a> <a href="src/Cardano.CoinSelection.Fee.html#DustThreshold" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></p><div class="doc"><p>Defines the maximum size of a dust coin.</p><p>Change values that are less than or equal to this threshold will not be
 included in transactions.</p><p>This type is isomorphic to <code><a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DustThreshold" class="def">DustThreshold</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unDustThreshold" class="def">unDustThreshold</a> :: <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:DustThreshold" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DustThreshold:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-118" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DustThreshold:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DustThreshold:Ord:2"></span> <a href="../base-4.12.0.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-118" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DustThreshold:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DustThreshold:Show:3"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-119" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DustThreshold:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DustThreshold:Generic:4"></span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-118" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DustThreshold:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> :: <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.12.0.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> x -&gt; <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DustThreshold:Rep:5"></span> <span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a></span> <a href="src/Cardano.CoinSelection.Fee.html#line-118" class="link">Source</a> <a href="#t:DustThreshold" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DustThreshold:Rep:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cardano-CoinSelection-Fee.html">Cardano.CoinSelection.Fee</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.12.0.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> = <a href="../base-4.12.0.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;DustThreshold&quot; &quot;Cardano.CoinSelection.Fee&quot; &quot;cardano-coin-selection-0.0.1-3OhqtrjTUsjLqk57BzacmE&quot; <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;DustThreshold&quot; <a href="../base-4.12.0.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> <a href="../base-4.12.0.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> (<a href="../base-4.12.0.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a> &quot;unDustThreshold&quot;) <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> <a href="../base-4.12.0.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.12.0.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../base-4.12.0.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>)))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:coalesceDust" class="def">coalesceDust</a> :: <a href="Cardano-CoinSelection-Fee.html#t:DustThreshold" title="Cardano.CoinSelection.Fee">DustThreshold</a> -&gt; <a href="../base-4.12.0.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] <a href="src/Cardano.CoinSelection.Fee.html#coalesceDust" class="link">Source</a> <a href="#v:coalesceDust" class="selflink">#</a></p><div class="doc"><p>From the given list of coins, remove dust coins with a value less than or
   equal to the given threshold value, redistributing their total value over
   the coins that remain.</p><p>This function satisfies the following properties:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sum coins = sum (coalesceDust threshold coins)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>all (/= Coin 0) (coalesceDust threshold coins)
</code></strong></pre></div></div><a href="#g:5" id="g:5"><h1>Coin Splitting</h1></a><div class="top"><p class="src"><a id="v:splitCoin" class="def">splitCoin</a> :: <a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a> -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] -&gt; [<a href="Cardano-CoinSelection.html#t:Coin" title="Cardano.CoinSelection">Coin</a>] <a href="src/Cardano.CoinSelection.Fee.html#splitCoin" class="link">Source</a> <a href="#v:splitCoin" class="selflink">#</a></p><div class="doc"><p>Splits up the given coin of value <strong><code>v</code></strong>, distributing its value over the
   given coin list of length <strong><code>n</code></strong>, so that each coin value is increased by
   an integral amount within unity of <strong><code>v/n</code></strong>, producing a new list of coin
   values where the overall total is preserved.</p><h2>Basic Examples</h2><p>When it's possible to divide a coin evenly, each coin value is increased by
 the same integer amount:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 40) (Coin &lt;$&gt; [1, 1, 1, 1])
</code></strong>[Coin 11, Coin 11, Coin 11, Coin 11]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 40) (Coin &lt;$&gt; [1, 2, 3, 4])
</code></strong>[Coin 11, Coin 12, Coin 13, Coin 14]
</pre><h2>Handling Non-Uniform Increases</h2><p>When it's not possible to divide a coin evenly, each integral coin value in
 the resulting list is always within unity of the ideal unrounded result:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 2) (Coin &lt;$&gt; [1, 1, 1, 1])
</code></strong>[Coin 1, Coin 1, Coin 2, Coin 2]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [1, 1, 1, 1])
</code></strong>[Coin 3, Coin 3, Coin 4, Coin 4]
</pre><h2>Handling Overflow</h2><p>While processing the given list, if increasing the value of any given coin
 <strong><code>c</code></strong> would cause its value to exceed <code><a href="../base-4.12.0.0/Prelude.html#v:maxBound" title="Prelude">maxBound</a></code>, this function will leave
 coin <strong><code>c</code></strong> <em>unchanged</em> in the resulting list, distributing the excess
 value to coins that occur <em>later</em> in the list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [unCoin maxBound, 1])
</code></strong>[Coin 45000000000000000, Coin 11]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [unCoin maxBound - 1, 1])
</code></strong>[Coin 44999999999999999, Coin 11]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [unCoin maxBound - 1, 1, 1])
</code></strong>[Coin 44999999999999999, Coin 6, 6]
</pre><h2>Handling Leftover Remaining Value</h2><p>If there is any remaining value left over after processing the list, a <em>new</em>
 coin is appended to the <em>end</em> of the list to hold the excess value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) []
</code></strong>[Coin 10]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [unCoin maxBound])
</code></strong>[Coin 45000000000000000, Coin 10]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>splitCoin (Coin 10) (Coin &lt;$&gt; [unCoin maxBound - 1])
</code></strong>[Coin 44999999999999999, Coin 10]
</pre><h2>Properties</h2><p>The total value is always preserved:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>sum (splitCoin x ys) == x + sum ys
</code></strong></pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>